@model QuanLyRuiRoTinDung.Models.Entities.BaoCaoRuiRo

<div class="row mb-3">
    <div class="col-12">
        <div>
            <h5 class="mb-2">
                <i class="fas fa-file-alt me-2"></i>
                @Model.LoaiBaoCao
            </h5>
            <p class="text-muted mb-0">Mã báo cáo: <strong>@Model.MaBaoCao</strong></p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card card-info-report">
            <div class="card-header bg-info-header">
                <h6 class="card-title mb-0 text-white">
                    <i class="fas fa-info-circle me-2"></i>Thông tin báo cáo
                </h6>
            </div>
            <div class="card-body bg-info-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="info-item mb-3">
                            <label class="form-label info-label">
                                <i class="fas fa-file-alt me-2 text-primary"></i>Loại báo cáo
                            </label>
                            <p class="mb-0 info-value">
                                <strong>@Model.LoaiBaoCao</strong>
                            </p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="form-label info-label">
                                <i class="fas fa-calendar-alt me-2 text-success"></i>Kỳ báo cáo
                            </label>
                            <p class="mb-0 info-value">
                                <strong>@Model.KyBaoCao</strong>
                            </p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="form-label info-label">
                                <i class="fas fa-check-circle me-2 text-info"></i>Trạng thái
                            </label>
                            <p class="mb-0 info-value">
                                @{
                                    var badgeClass = Model.TrangThai switch
                                    {
                                        "Phê duyệt" or "Đã duyệt" => "bg-success",
                                        "Nháp" => "bg-secondary",
                                        _ => "bg-info"
                                    };
                                }
                                <span class="badge @badgeClass fs-6 px-3 py-2">@Model.TrangThai</span>
                            </p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="info-item mb-3">
                            <label class="form-label info-label">
                                <i class="fas fa-calendar me-2 text-warning"></i>Ngày báo cáo
                            </label>
                            <p class="mb-0 info-value">
                                <strong class="text-primary">@Model.NgayBaoCao.ToString("dd/MM/yyyy")</strong>
                            </p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="form-label info-label">
                                <i class="fas fa-user me-2 text-danger"></i>Người lập
                            </label>
                            <p class="mb-0 info-value">
                                <strong class="text-dark">@Model.NguoiLapNavigation?.HoTen</strong>
                            </p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="form-label info-label">
                                <i class="fas fa-clock me-2 text-secondary"></i>Ngày lập
                            </label>
                            <p class="mb-0 info-value">
                                <strong class="text-muted">@Model.NgayLap?.ToString("dd/MM/yyyy HH:mm")</strong>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-12">
        <div class="card card-content-report">
            <div class="card-header bg-content-header">
                <h6 class="card-title mb-0 text-white">
                    <i class="fas fa-file-alt me-2"></i>Nội dung báo cáo
                </h6>
            </div>
            <div class="card-body bg-content-body">
                <div class="report-content">
                    <div class="content-item mb-4 p-3 bg-primary-light">
                        <h6 class="fw-bold mb-3 d-flex align-items-center">
                            <i class="fas fa-list-check me-2 text-primary fa-lg"></i>
                            <span>Tổng số khoản vay rà soát</span>
                        </h6>
                        <p class="ms-4 mb-0">
                            <span class="badge bg-primary fs-5 px-3 py-2">@Model.TongSoKhoanVayRaSoat</span>
                            <span class="ms-2 fw-semibold text-dark">khoản</span>
                        </p>
                    </div>
                    <div class="content-item mb-4 p-3 bg-danger-light">
                        <h6 class="fw-bold mb-3 d-flex align-items-center">
                            <i class="fas fa-exclamation-triangle me-2 text-danger fa-lg"></i>
                            <span>Số khoản vay rủi ro cao</span>
                        </h6>
                        <p class="ms-4 mb-0">
                            <span class="badge bg-danger fs-5 px-3 py-2">@Model.SoKhoanVayRuiRoCao</span>
                            <span class="ms-2 fw-semibold text-dark">khoản</span>
                        </p>
                    </div>
                    <div class="content-item mb-4 p-3 bg-warning-light">
                        <h6 class="fw-bold mb-3 d-flex align-items-center">
                            <i class="fas fa-money-bill-wave me-2 text-warning fa-lg"></i>
                            <span>Giá trị nợ xấu</span>
                        </h6>
                        <p class="ms-4 mb-0">
                            <strong class="text-danger fs-4 fw-bold">@Model.GiaTriNoXau?.ToString("N0")</strong>
                            <span class="ms-2 fw-semibold text-dark">VND</span>
                        </p>
                    </div>
                    <div class="content-item p-3 bg-info-light">
                        <h6 class="fw-bold mb-3 d-flex align-items-center">
                            <i class="fas fa-lightbulb me-2 text-info fa-lg"></i>
                            <span>Kiến nghị xử lý</span>
                        </h6>
                        <p class="ms-4 mb-0 text-dark lh-lg">@Model.KienNghiXuLy</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@if (!string.IsNullOrEmpty(Model.DuongDanFile))
{
    <div class="row mt-3">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-file-pdf me-2"></i>File báo cáo đính kèm
                    </h6>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
                        <div class="d-flex align-items-center">
                            <div class="file-icon-wrapper me-3">
                                @{
                                    var fileExtension = System.IO.Path.GetExtension(Model.DuongDanFile)?.ToLower();
                                    var iconClass = fileExtension switch
                                    {
                                        ".pdf" => "fas fa-file-pdf text-danger",
                                        ".doc" or ".docx" => "fas fa-file-word text-primary",
                                        ".xls" or ".xlsx" => "fas fa-file-excel text-success",
                                        ".jpg" or ".jpeg" or ".png" or ".gif" => "fas fa-file-image text-info",
                                        _ => "fas fa-file text-secondary"
                                    };
                                }
                                <i class="@iconClass fa-3x"></i>
                            </div>
                            <div>
                                <h6 class="mb-1 fw-bold">@System.IO.Path.GetFileName(Model.DuongDanFile)</h6>
                                <small class="text-muted">
                                    <i class="fas fa-calendar me-1"></i>
                                    Đã đính kèm vào @Model.NgayLap?.ToString("dd/MM/yyyy HH:mm")
                                </small>
                            </div>
                        </div>
                        <div class="d-flex gap-2 flex-wrap">
                            <a href="@Url.Action("DownloadFile", "LanhDao", new { id = Model.MaBaoCao })" 
                               class="btn btn-success btn-download-file">
                                <i class="fas fa-download me-2"></i>Tải xuống
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="row mt-3">
        <div class="col-12">
            <div class="alert alert-info d-flex align-items-center">
                <i class="fas fa-info-circle me-3 fa-2x"></i>
                <div>
                    <strong>Chưa có file đính kèm</strong>
                    <p class="mb-0 small">Báo cáo này chưa có file đính kèm.</p>
                </div>
            </div>
        </div>
    </div>
}

<style>
    /* Card Styles */
    .card {
        border: none;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        transition: all 0.3s ease;
    }

    .card:hover {
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
    }

    /* Thông tin báo cáo Card */
    .card-info-report {
        border-left: 5px solid #06b6d4;
    }

    .bg-info-header {
        background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%) !important;
        border-bottom: none;
        border-radius: 12px 12px 0 0 !important;
        padding: 1.25rem 1.5rem;
    }

    .bg-info-body {
        background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 50%, #f0fdfa 100%);
        padding: 1.5rem;
    }

    .info-item {
        padding: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 8px;
        border-left: 3px solid #06b6d4;
        transition: all 0.3s ease;
    }

    .info-item:hover {
        background: rgba(255, 255, 255, 0.9);
        transform: translateX(5px);
        box-shadow: 0 4px 12px rgba(6, 182, 212, 0.2);
    }

    .info-label {
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: #475569;
        margin-bottom: 0.5rem;
    }

    .info-value {
        color: #1e293b;
        font-size: 1rem;
    }

    /* Nội dung báo cáo Card */
    .card-content-report {
        border-left: 5px solid #8b5cf6;
    }

    .bg-content-header {
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important;
        border-bottom: none;
        border-radius: 12px 12px 0 0 !important;
        padding: 1.25rem 1.5rem;
    }

    .bg-content-body {
        background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 50%, #faf5ff 100%);
        padding: 1.5rem;
    }

    .content-item {
        border-radius: 10px;
        transition: all 0.3s ease;
        border-left: 4px solid;
    }

    .content-item:hover {
        transform: translateX(5px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    .bg-primary-light {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%);
        border-left-color: #3b82f6;
    }

    .bg-danger-light {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
        border-left-color: #ef4444;
    }

    .bg-warning-light {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
        border-left-color: #f59e0b;
    }

    .bg-info-light {
        background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
        border-left-color: #06b6d4;
    }

    .report-content {
        line-height: 1.8;
        color: #1e293b;
    }

    .report-content h6 {
        color: #1e293b;
        font-size: 1.1rem;
    }

    .report-content p {
        margin-bottom: 0;
    }

    /* File Section */
    .card-header.bg-primary {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
    }

    .file-icon-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        border-radius: 12px;
        padding: 10px;
    }

    .btn-download-file {
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .btn-download-file:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }

    .card.border-primary {
        border: 2px solid #3b82f6 !important;
    }

    .alert-info {
        border-radius: 12px;
        border-left: 4px solid #06b6d4;
    }

    /* Badge enhancements */
    .badge {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
</style>

